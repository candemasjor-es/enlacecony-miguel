{% extends 'base_videos.html.twig' %}

{% block title %}Enlace cony i miguel - perfil
{% endblock %}

{% block body %}
<style>
			#video-container {
				position: relative;
				width: 100%;
				height: 100vh;
				overflow: hidden;
			}

			#myVideo {
				position: absolute;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				width: 100%;
				height: auto;
				min-width: 100%;
				min-height: 100%;
			}

			#aviso-orientacion-vertical {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgba(0, 0, 0, 0.7);
				display: flex;
				align-items: center;
				justify-content: center;
				color: white;
				font-size: 24px;
			}
			@media(orientation: portrait) {
				#aviso-orientacion-vertical {
					display: flex;
				}
			}
		</style>
		<div id="aviso-orientacion-vertical" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); display: flex; align-items: center; justify-content: center; color: white; font-size: 24px;">
    Por favor, gire su dispositivo para ver el contenido correctamente.<br/>
	<button onclick="reloadPage()">Recargar Página</button>
</div>
<video id="myVideo" muted playsinline>
    <source src="{{ asset('build/videos/fondo.mp4') }}" type="video/mp4">
    Su navegador no es compatible con video HTML5.
</video>
	<script>
    const avisoOrientacionVertical = document.getElementById('aviso-orientacion-vertical');
    const myVideo = document.getElementById('myVideo');

    function isMobile() {
        return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
    }

    function handleOrientationChange() {
        if (isMobile() && window.innerHeight > window.innerWidth) {
            avisoOrientacionVertical.style.display = 'flex';
            myVideo.pause();
        } else {
            avisoOrientacionVertical.style.display = 'none';
            myVideo.play();

            setTimeout(() => {
                myVideo.pause();
                // Redirige a la ruta especificada
                window.location.href = '{{ path('app_home') }}'; // Asegúrate de que '{{ path('app_home') }}' se evalúe correctamente en tu entorno
            }, 44000); // 44 segundos en milisegundos
        }
    }

    function reloadPage() {
        window.location.reload();
    }

    window.addEventListener('orientationchange', handleOrientationChange);
    handleOrientationChange(); // Llama a la función al cargar la página para verificar la orientación inicial
</script>
{% endblock %}
